#
# The purpose of the file is to alter configurations for debug kernels enabling
# or adding features that are only applicable to DEBUG
#

CONFIG_EMBEDDED=y

CONFIG_PCIEASPM_DEBUG=y
CONFIG_PCIEAER_INJECT=m

# Enabling tracing access to block devices
CONFIG_BLK_DEV_IO_TRACE=y

# Enabling these for eBPF and ADEB
CONFIG_BPF_EVENTS=y
CONFIG_IKHEADERS=y

CONFIG_MODULE_SIG=y
CONFIG_MODULE_SIG_FORMAT=y

CONFIG_DEBUG_INFO=y
CONFIG_DEVKMEM=y
CONFIG_DEVMEM=y
CONFIG_PRINTK_DEVKMSG_DEFAULT_ON=y
CONFIG_LOG_BUF_SHIFT=19
CONFIG_DYNAMIC_DEBUG=y
CONFIG_IKCONFIG=y
CONFIG_IKCONFIG_PROC=y
CONFIG_SCHEDSTATS=y

# Emulator Support
CONFIG_KEYBOARD_GOLDFISH_EVENTS=y
CONFIG_FB_GOLDFISH=y
CONFIG_GOLDFISH=y
CONFIG_GOLDFISH_AUDIO=y
CONFIG_GOLDFISH_PIPE=y
CONFIG_GOLDFISH_SYNC=y
CONFIG_VIRTIO_NET=y

# MLMUX Test Channel
CONFIG_MLMUX_TEST_CLI=m

# Kmemleak support
CONFIG_DEBUG_KMEMLEAK=n

# ML1 totem support
CONFIG_INPUT_ML_TOTEM_GRIP=y

# Graphics DRM EDID Override
CONFIG_DRM_LOAD_EDID_FIRMWARE=y

CONFIG_CNSS2_DEBUG=y
CONFIG_LINUX_QCMBR=y
CONFIG_HSP_DIAG=y

# QCOM WLAN
CONFIG_CLD_LL_CORE=y
CONFIG_QCA_CLD_WLAN_PROFILE="ml_demophon_debug"

CONFIG_SENSORS_AMD_ENERGY=y
CONFIG_KPROBES=y
CONFIG_KPROBE_EVENTS=y

# show addresses in a stack traces
CONFIG_MLSEC_STACK_ADDRESS_DUMP=y

# Enable PPP modules for time sync'ed testing
CONFIG_PPP=m
CONFIG_PPP_BSDCOMP=m
CONFIG_PPP_DEFLATE=m
CONFIG_PPP_ASYNC=m

# enable lockup detection
CONFIG_LOCKUP_DETECTOR=y
CONFIG_SOFTLOCKUP_DETECTOR=y
CONFIG_BOOTPARAM_SOFTLOCKUP_PANIC=y
CONFIG_BOOTPARAM_SOFTLOCKUP_PANIC_VALUE=1
CONFIG_HARDLOCKUP_DETECTOR_PERF=y
CONFIG_HARDLOCKUP_CHECK_TIMESTAMP=y
CONFIG_HARDLOCKUP_DETECTOR=y
CONFIG_BOOTPARAM_HARDLOCKUP_PANIC=y
CONFIG_BOOTPARAM_HARDLOCKUP_PANIC_VALUE=1
CONFIG_DETECT_HUNG_TASK=y
CONFIG_DEFAULT_HUNG_TASK_TIMEOUT=120
CONFIG_BOOTPARAM_HUNG_TASK_PANIC=y
CONFIG_BOOTPARAM_HUNG_TASK_PANIC_VALUE=1
CONFIG_WQ_WATCHDOG=y

# Enabling kgdb for kernel debugging
CONFIG_GDB_SCRIPTS=y
CONFIG_FRAME_POINTER=y
CONFIG_KGDB=y
CONFIG_KGDB_SERIAL_CONSOLE=y

# Audio latency test
CONFIG_ML_AUDIO_LATENCY_MERO=y

# Enable netlink monitoring
CONFIG_NLMON=y

# enable NFS server in debug builds only
CONFIG_NFSD=y
CONFIG_NFSD_V4=y
